<header class="scan-header">
  <div class="scan-header__inner">
    <a class="scan-logo" href="{{ site.baseurl }}/">SCAN</a>

    <form class="scan-search" onsubmit="return false" role="search" aria-label="Buscar capítulos">
      <input id="capsSearch" type="search" placeholder="Buscar capítulo… ej. 12, 13.5">
      <button type="button" id="capsSearchBtn">Buscar</button>
    </form>

    <a class="scan-cta" href="{{ site.baseurl }}/app">Descarga la app</a>
  </div>
</header>

<script>
(function () {
  var q = document.getElementById('capsSearch');
  var btn = document.getElementById('capsSearchBtn');
  if (!q || !btn) return;

  // Listas esperadas: #chaptersList y #downloadsList
  function filterList(list){
    if (!list) return;
    var li = list.querySelectorAll('li');
    var needle = (q.value || '').trim().toLowerCase();

    li.forEach(function(item){
      var txt = (item.textContent || '').toLowerCase();
      // También soporta data-cap (capítulo) si lo agregas a <li data-cap="13.5">
      var cap = (item.dataset.cap || '').toLowerCase();
      var show = !needle || txt.includes(needle) || cap.includes(needle);
      item.style.display = show ? '' : 'none';
    });
  }

  function apply(){
    filterList(document.getElementById('chaptersList'));   // “Ver capítulos aquí”
    filterList(document.getElementById('downloadsList'));  // “Links de descarga”
  }

  q.addEventListener('input', apply);
  btn.addEventListener('click', apply);
})();
</script>
